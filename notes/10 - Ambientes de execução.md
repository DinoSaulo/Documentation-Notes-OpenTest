# [Ambientes de execução](https://getopentest.org/docs/environments.html)

## Visão geral

Conforme descrito na seção anterior, sobre como trabalhaar com dados de teste, o OpenTest exoge que todos os dados sejam mantidos no diratório `data`. No entanto, em muitos ceários de automação de testes é necessário alterar regularmente entre vários conjuntos de dados de teste. No OpenTest isso pode ser feito através da criação de diferentes "ambientes de execução".

Os ambiente de execução permitem que o testador substitua um ou mais arquivos de dados do diretório de dados durante uma única sessão de teste.

## Criando ambientes

Para criar um novo ambiente deve ser criado um subdierório no diretório `data-env` do repositório de teste. Por exemplo, o repositório de teste descrito abaixo define dois ambientes: dev e prod

```bash
test-repo
├── data
│   └── config.yaml
├── data-env
│   ├── dev
│   │   └── config.yaml
│   └── prod
│       └── config.yaml
└── tests
    └── ...
```

O repositório de teste descrito acima contém três versões diferentes do arquivo de configurações `config.yaml`. Sempre que a sintaxe `$data("config")` for encontrada em um teste, o arquivo de dados `config.yaml` referenciado em um teste, o arquivo de dados `config.yaml` referenciado será diferente, dependendo do ambiente selecionado quando a sessão de teste for criada:

- Se nenhum ambiente for selecionado, o arquivo `test-repo\data\config.yaml` será utilizad como base para configurações do ambiente.
- Se o ambiente `dev` foi selecionado, por exemplo, o arquivo `test-repo\data-env\dev\config.yaml`, será utilizado.
- Se o ambiente `prod` for selecionado, o arquivo `test-repo\data-env\prod\config.yaml` será utilizado.

## Selecionando um ambiente

Depois de criar os diretórios de ambiente, é possivel selecionar em qual ambiente desejamos executar os testes sempre que for iniciada uma nova seção. O ambiente de execução pode ser selecionado de três maneiras:

- A maneira mais fácil e comum é escolher o ambiente ao criar uma nova sessão de testes pela interface gráfica web do OpenTest.

- É posivel criar um modelo de sessão de teste que tenha a propriedade de ambiente preenchida de acordo com o nome do ambiente desejado. Em seguida, iniciar uma sessão com base nesse modelo, seja na interface web ou por meio da API do servidor do OpenTest.

- É possivel também criar uma sessão de teste chamando a API do servidor do OpenTest e preenchendo a propriedade do ambiente no JSON de configurações.

