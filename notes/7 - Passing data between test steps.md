7 - [Passando dados entre os passoas de teste](https://getopentest.org/docs/passing-data.html)

## Visão geral

A maioria dos cenários de automação de teste do mundo real exige tranferência de valores dados entre etapas de teste (por exemplo, ler o número de do pedido gerado por uma chamada a API e usa-lo na proxima etapa e validar o status da requisição da API).

O OpenTest fornece três técnicas para armazenar e recuperar dados de teste:

- **Armazenar os dados localmente**: para dados que serão acessados apenas pelo mesmo *actor* de teste que os gerou.

- **O armazenamento de dados compartilhado**: para dados que podem ser acessados por vários atores de teste que participam de um teste distribuido.

- **O armazenadmento de dados da sessão**: para dados acessiveis em vários testes e atores de teste e que duram toda a sessão de teste.

Abaixo está uma representação gráfica do tempo de vida dos três armazenamentos de dados:

![Armazenamento de dados](../img/data-stores.png)

Vamos ver agora como utilizar cada um desses tipos de armazenamento

## Dados locais ($localData)

Quando uma variável so for necessária em ações de teste executados em sequencia no mesmo ator de teste, a melhor técnica a ser usada é o armazenamento de dados local. Essa técnica é muito rápida, pois é feita localmente em um simples objeto na memória ao qual é possivel adicionar propriedades para que sejam recuperadas e usadas posteriormente.

Há duas maneira de acessar os valores de dados no armazenamento de dados local:

 - **O objeto `$localData`**: Este objeto pode ser usado para ler e gravar propriedades de dados de/para o armazenamento de dados local.

Exemplo:
```yaml
- script: |
    // Escreve o "username" no local data
    $localData.username = "john_doe";

    // Faz a leitura do username e armazena no log
    $log("The username is " + $localData.username);
```

Uma segunda opção é criar uma variável no JavaScript usando a sintaxe `var` e usa-la para armazenar e recuperar os dados. A única vantagem de armazenar os dados no objeto `$localData`, como no exemplo anterior, é que ele define a intenção de usar essa propriedade em uma ação de teste.
Exemplo do uso da sintaxe `var`:
```yaml
- description: Faz a leitura do username
  action: org.getopentest.selenium.ReadElementText
  args:
      locator: {css: p.username}

- script: |
    var username = $output.text

- description: Escreve o nome de usuário na caixa de texto "username"
  action: org.getopentest.selenium.SendKeys
  args:
    locator: {css: "input[name='username']"}
    text: $script username
```