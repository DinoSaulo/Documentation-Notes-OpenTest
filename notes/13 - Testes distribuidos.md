# [Ideias distribuidas](https://getopentest.org/docs/distributed-testing.html)

## Visão geral

A maioria dos testes automatizados são executados em apenas uma máquina e interagem apenas com uma janela de um navegador, aplicativo mobile ou serviço web (API). Porém, há alguns casos específicos onde será necessário executar alguns cenários de testes em duas ou mais maquinas, de forma sequencial ou  paralela. Para esse caso é necessário a execução de um teste distribuido.
O OpenTest tem um suporte muito bom para a construção de testes distribuídos, sendo este um dos primeiros objetivos de design da ferramenta.

Os desafios mais comuns ao desenvolver os testes distribuidos são:

- Controlar quais etapas de teste são executadas em cada máquina específica.
- Sincronizando a execução das etapas de teste para garantir que sejam executadas na sequência correta entre as várias máquinas.
- compartilhamento de dados gerados dinamicamente entre as maquinas que executam os testes.

O OpenTest responde a esses desafios de uma maneira que permite que os engenheiros de teste se concentem na lógica e no fluxo de teste, ao invés das complexidades que os testes distribuiudos possuem.

## Configuração de atores de teste

Um teste distrivuido envolve pelo menos dois atores de teste. os atores normalmente são executados em máquinas diferentes, mas também é possivel executar vários atores em uma única máquina. Isso é conveniente, porque significa que o mesmo teste pode ser executado inalterado em um ambiente de desenvolvimento em que tudo é executado na mesma máquina, bem como em um ambiente de teste de desempenho, ou em produção em que os componente de softeare são implantados em máquinas separadas.

O diagrama abaixo mostra um cenário bastante complexo, nele temos o servidor OpenTest e dois atores de teste são executados em três maquinas separadas:

![Testes distribuidos](../img/distributed-testing.png)

É assim que os arquivos de configuração para os dois atores devem estar parecidos:

_MACHINE 2, C:\opentest\actor1\actor.yaml_
```yaml
actorType: ACTOR1
syncServerUrl: http://10.0.0.1:3000

# continuar com outros parâmetros aqui
```

_MACHINE 3, C:\opentest\actor2\actor.yaml_
```yaml
actorType: ACTOR2
syncServerUrl: http://10.0.0.1:3000

# continuar com outros parâmetros aqui
```

Os dois arquivos de configuração mais importantes que precisamos definir são os arquivos arquivo de configuração `actor.yaml`para cada ator de teste são:

- `actorType`: irá indicar qual ator de teste irá executar o teste
- `syncServerUrl`: irá indicar o _endpoint_ em que o servidor OpenTest está sendo escutando, para que o agente de teste saiba como se comunicar com o servidor.