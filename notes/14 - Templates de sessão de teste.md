# [Templates de sessão de teste](https://getopentest.org/docs/session-templates.html)

## Visão geral dos modelos de sessão

Uma sessão de teste identifica um conjunto de teste a serem executados, juntamente com outros detalhes, como o ambiente em que eles serão executados, a repetição ou não de testes com galhas, e outros. A criação manual de sessões de testes podem ser feitas utilizando a interface web do OpenTest. Essa interface é muito boa para a execução de testes ad-hoc. No entanto, este também é um processo repetitivo, demorado e algumas vezes pode gerar alguns erros, especialmente ao incluir  um grande numero de testes. Além disso, a entrada manual desses detalhes de execução não é possivel quando uma sessão de testes é iniciada de forma  automatica através de um uma ferramenta de integra contínua. Para resolver esses problemas, o OpenTest apresenta o conceito de um modelo de sessão de teste.

## A localização e a estrutura dos arquivos de modelo

Os modelos de sessão de teste são armazenados comos arquivos YAML no subdiratório de modelos do repositório de teste. Como por exemplo, neste repositório está presente no caminho [./test-repo/templates/](../test-repo/templates/). Por exempo, para criar um modelo de sessão chamado de "Meu primeiro modelo de sessão" e que conterá dois testes (Teste 1 e Teste 2), o repositório de teste deverá ter a seguinte aparência:

```bash
test-repo
    ├── templates
    │   └── Meu primeiro modelo de sessão.yaml
    └── tests
        ├── Test 1.yaml
        └── Test 2.yaml
```

A estrutura do arquivo de modelo é demonstrada abaixo. Todas as propriedades são opicionais e é possivel mistura-las e combina-las conforme necessário.

_test-repo/templates/My first session template.yaml_
```yaml
description: Um modelo de sessão de teste que executa dois testes fictícios
sessionLabel: Two tests
actorTags: []
environment: null
maxIterations: 1
includeTestsWithTags: (tag1 || tag2) && tag3
includeTestsFromTemplates:
    - name: template1
      path: dir1

    - name: template2
      path: dir2
tests:
    - name: Test 1
      path: .

    - name: Test 2
      path: .
```

_Tabela 1. Propriedade das sessões de testes_

|Descrição      | Descrição das tags do template |
|---------------|----------------|
|`sessionLabel`| O título da sessão que será atribuído às sessões de teste criadas a partir deste modelo.|
|`actorTags`| Uma matriz de strings representando a lista de tags que serão necessárias para os atores de teste que executam a sessão de teste. Por padrão ela é definida como `null`.|
|`environment`| O ambiente no qual a nova sessão será executada. Por padrão ela é definida como `null`.|
|`maxIterations`| O número máximo de vezes para repetir a execução de testes com falha. Por padrão ela é definida como 1.|
|`includeTestsWithTags`| Uma expressão que identifica os testes a serem incluídos na sessão com base nas tags que foram atribuídas a eles utilizando a propriedade `tags` no arquivo de testes. Essa é uma expressão boleana, onde cada tag é utilizada como um operando do tipo booleano. O valor do operando será `true` se um teste contiver uma determinada tag e `false` caso contrário. Por exemplo, se um teste contiver as tgs `smoke` e `flaky`, a expressão `smoke && !flaky` será traduzida como `true && false`, que é `false`. Em resumo, o teste não será selecionado para ser executado nesta sessão de teste.|
|`includeTestsFromTemplates`| Uma lista de nomes de modelos que serão usados como fonte para a lista de testes a serem incluidos na sessão de teste. OBS: é necessário especificar os nomes dos modelo no atributo `name`, juntamente com seu caminho em relação ao diretório de modelos no atributo `path`.|
|`tests`| É uma matriz que armazena a lista de testes a serem incluídos na sessão de testes. Cada teste é especificado com um objeto com o nome e o caminhodo arquivo. A propriedade `name` especifica o nome do arquivo de teste a ser executado (sem a extensão `.yaml`), a propriedade `name` também especifica o caminho relativo do arquivo de teste ao diretório de testes no repositório de testes.|

## Criando uma sessão de testes baseada em um template

Há duas maneiras de criar uma nova sessão de teste com base em um arquivo de modelo:

1. Usando a interface Web do servidor do OpenTest, através do menu, clicando nos botões "Session" > "Create Session From Template". Selecione os arquivos de casos de teste que devem ser executos e clique em "Create session".

2. Usando o [OpenTest server API](/notes/referencias/Web%20API.md)